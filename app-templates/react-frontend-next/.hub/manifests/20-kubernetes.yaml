---
components:
- name: s3
  source:
    repoUrl: https://github.com/agilestacks/components.git
    repoPath: applications/components/s3-website
    dir: components/s3-website
    branch: master
    fromEnv: GITHUB_TOKEN

lifecycle:
  bare: allow
  verbs: [deploy, undeploy]
  order:
    - s3
  mandatory:
    - s3

parameters:
- name: dns.domain
- name: terraform.bucket.name
  fromEnv: STATE_BUCKET
- name: terraform.bucket.region
  fromEnv: STATE_REGION
- name: cloud.region
  fromEnv: AWS_DEFAULT_REGION
- name: terraform.bucket.name
  fromEnv: STATE_BUCKET
- name: component.s3website
  parameters:
  - name: name
  - name: baseDomain
    value: ${dns.domain}
  - name: bucket
  - name: endpoint

outputs:
- name: application.bucket
  value: ${component.s3website.bucket}
- name: application.endpoint
  value: ${component.s3website.endpoint}
